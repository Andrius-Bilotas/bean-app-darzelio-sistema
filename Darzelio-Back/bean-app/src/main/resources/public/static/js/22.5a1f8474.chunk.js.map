{"version":3,"sources":["Components/RegistrationToSystem/RegistrationToSystem.jsx"],"names":["RegistrationToSystem","props","handleChange","event","preventDefault","validEmailRegex","RegExp","target","name","value","errors","state","letters","firstname","match","length","email","test","lastname","setState","handleSubmit","outputUser","valid","Object","values","forEach","val","validateForm","alert","axios","post","API","then","response","history","push","catch","error","data","message","status","this","className","onSubmit","noValidate","htmlFor","type","onChange","Component"],"mappings":"uPAIqBA,E,kDACnB,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAaRC,aAAe,SAACC,GACdA,EAAMC,iBAEN,IAAMC,EAAkBC,OACtB,8GAJsB,EAMAH,EAAMI,OAAtBC,EANgB,EAMhBA,KAAMC,EANU,EAMVA,MACRC,EAAS,EAAKC,MAAMD,OACpBE,EAAU,4HAEhB,OAAQJ,GACN,IAAK,YACHE,EAAOG,WACJJ,EAAMK,MAAMF,IAAYH,EAAMM,OAAS,GAAsB,IAAjBN,EAAMM,OAC/C,iFACA,GACN,MAEF,IAAK,QACHL,EAAOM,MACLX,EAAgBY,KAAKR,IAA2B,IAAjBA,EAAMM,OACjC,GACA,2DACN,MACF,IAAK,WACHL,EAAOQ,UACJT,EAAMK,MAAMF,IAAYH,EAAMM,OAAS,GAAsB,IAAjBN,EAAMM,OAC/C,2FACA,GAMV,EAAKI,SAAL,aAAgBT,UAASF,EAAOC,IAAS,gBAhDxB,EAqDnBW,aAAe,SAACjB,GACdA,EAAMC,iBACN,IAAMiB,EAAa,CACjBL,MAAO,EAAKL,MAAMK,MAClBH,UAAW,EAAKF,MAAME,UAEtBK,SAAU,EAAKP,MAAMO,WAEF,SAACR,GACpB,IAAIY,GAAQ,EAKZ,OAJAC,OAAOC,OAAOd,GAAQe,SAEpB,SAACC,GAAD,OAASA,EAAIX,OAAS,IAAMO,GAAQ,MAE/BA,EAGLK,CAAa,EAAKhB,MAAMD,QAwB1BkB,MACE,2FAxBFC,IACGC,KAAKC,IAAM,sBAAuBV,GAClCW,MAAK,SAACC,GACLL,MACE,sFAEF,EAAK3B,MAAMiC,QAAQC,KAAK,aAGzBC,OAAM,SAACC,GAC8B,wBAAhCA,EAAMJ,SAASK,KAAKC,QACtBX,MAAM,wCACmC,wBAAhCS,EAAMJ,SAASK,KAAKC,QAC7BX,MAAM,kCAC6B,MAA1BS,EAAMJ,SAASO,QACxBZ,MACE,6FArFV,EAAKjB,MAAQ,CACXE,UAAW,GACXK,SAAU,GACVF,MAAO,GAEPN,OAAQ,CACNG,UAAW,GACXK,SAAU,GACVF,MAAO,KAVM,E,qDAmGT,IACAN,EAAW+B,KAAK9B,MAAhBD,OACR,OACE,yBAAKgC,UAAU,kBACb,yBAAKA,UAAU,oDACb,yBAAKA,UAAU,QACb,gHAEF,0BAAMC,SAAUF,KAAKrB,aAAcwB,YAAU,EAACF,UAAU,eACtD,yBAAKA,UAAU,QACb,2BAAOG,QAAQ,YAAYH,UAAU,iBAArC,sBAGA,2BACEI,KAAK,OACLJ,UAAU,eACVlC,KAAK,YACLuC,SAAUN,KAAKvC,aACf0C,YAAU,IAEXlC,EAAOG,UAAUE,OAAS,GACzB,0BAAM2B,UAAU,SAAShC,EAAOG,YAGpC,yBAAK6B,UAAU,QACb,2BAAOG,QAAQ,WAAWH,UAAU,iBAApC,4BAGA,2BACEI,KAAK,OACLJ,UAAU,eACVlC,KAAK,WACLuC,SAAUN,KAAKvC,aACf0C,YAAU,IAEXlC,EAAOQ,SAASH,OAAS,GACxB,0BAAM2B,UAAU,SAAShC,EAAOQ,WAGpC,yBAAKwB,UAAU,QACb,2BAAOG,QAAQ,QAAQH,UAAU,iBAAjC,8BAGA,2BACEI,KAAK,QACLJ,UAAU,eACVlC,KAAK,QACLuC,SAAUN,KAAKvC,aACf0C,YAAU,IAEXlC,EAAOM,MAAMD,OAAS,GACrB,0BAAM2B,UAAU,SAAShC,EAAOM,QAIpC,sDACA,6BACE,4BAAQ8B,KAAK,SAASJ,UAAU,mBAAhC,wB,GA7JoCM","file":"static/js/22.5a1f8474.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { API } from '../../Configuration/AppConfig';\r\nimport axios from 'axios';\r\n\r\nexport default class RegistrationToSystem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      firstname: '',\r\n      lastname: '',\r\n      email: '',\r\n\r\n      errors: {\r\n        firstname: '',\r\n        lastname: '',\r\n        email: '',\r\n      },\r\n    };\r\n  }\r\n  handleChange = (event) => {\r\n    event.preventDefault();\r\n\r\n    const validEmailRegex = RegExp(\r\n      /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i\r\n    );\r\n    const { name, value } = event.target;\r\n    const errors = this.state.errors;\r\n    const letters = /^[A-Za-ząčęėįšųūžĄČĘĖĮŠŲŪŽ -]+$/;\r\n\r\n    switch (name) {\r\n      case 'firstname':\r\n        errors.firstname =\r\n          !value.match(letters) || value.length < 2 || value.length === 0\r\n            ? 'Vardas turi būti iš raidžių ir ilgesnis nei 1 raidė! '\r\n            : '';\r\n        break;\r\n\r\n      case 'email':\r\n        errors.email =\r\n          validEmailRegex.test(value) || value.length === 0\r\n            ? ''\r\n            : 'El.paštas netinkamas! Formato pvz.: vardas@mail.com';\r\n        break;\r\n      case 'lastname':\r\n        errors.lastname =\r\n          !value.match(letters) || value.length < 2 || value.length === 0\r\n            ? 'Pavardė turi būti iš raidžių ir ilgesnė nei 1 raidė! '\r\n            : '';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.setState({ errors, [name]: value }, () => {\r\n   \r\n    });\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const outputUser = {\r\n      email: this.state.email,\r\n      firstname: this.state.firstname,\r\n\r\n      lastname: this.state.lastname,\r\n    };\r\n    const validateForm = (errors) => {\r\n      let valid = true;\r\n      Object.values(errors).forEach(\r\n        // if we have an error string set valid to false\r\n        (val) => val.length > 0 && (valid = false)\r\n      );\r\n      return valid;\r\n    };\r\n\r\n    if (validateForm(this.state.errors)) {\r\n      axios\r\n        .post(API + '/api/users/register', outputUser)\r\n        .then((response) => {\r\n          alert(\r\n            'Registracija sėkminga! Prisijungimo duomenys išsiųsti el.paštu'\r\n          );\r\n          this.props.history.push('/login');\r\n        })\r\n\r\n        .catch((error) => {\r\n          if (error.response.data.message === 'Item already exists') {\r\n            alert('Toks el.paštas jau egzistuoja! ');\r\n          } else if (error.response.data.message === 'Invalid field entry') {\r\n            alert('Užpildykite visus laukus!');\r\n          } else if (error.response.status === 400) {\r\n            alert(\r\n              'Registracija nesėkminga! Pasitikrinkite ar užpildėte laukus teisingai!'\r\n            );\r\n          }\r\n\r\n      \r\n        });\r\n    } else {\r\n      alert(\r\n        'Registracija nesėkminga! Pasitikrinkite ar  užpildėte laukus teisingai. '\r\n      );\r\n    }\r\n  };\r\n  render() {\r\n    const { errors } = this.state;\r\n    return (\r\n      <div className=\"container mt-5\">\r\n        <div className=\"col-lg-5 m-auto shadow p-3 mb-5 bg-white rounded\">\r\n          <div className=\"mb-4\">\r\n            <h3>Registracija į vaikų darželių informacinę sistemą</h3>\r\n          </div>\r\n          <form onSubmit={this.handleSubmit} noValidate className=\"form-group \">\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"firstname\" className=\"control-label\">\r\n                Vartotojo vardas*:\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                name=\"firstname\"\r\n                onChange={this.handleChange}\r\n                noValidate\r\n              />\r\n              {errors.firstname.length > 0 && (\r\n                <span className=\"error\">{errors.firstname}</span>\r\n              )}\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"lastname\" className=\"control-label\">\r\n                Vartotojo pavardė*:\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                name=\"lastname\"\r\n                onChange={this.handleChange}\r\n                noValidate\r\n              />\r\n              {errors.lastname.length > 0 && (\r\n                <span className=\"error\">{errors.lastname}</span>\r\n              )}\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"email\" className=\"control-label\">\r\n                Vartotojo el.paštas*:\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                name=\"email\"\r\n                onChange={this.handleChange}\r\n                noValidate\r\n              />\r\n              {errors.email.length > 0 && (\r\n                <span className=\"error\">{errors.email}</span>\r\n              )}\r\n            </div>\r\n\r\n            <div> * - privalomi laukai</div>\r\n            <div>\r\n              <button type=\"submit\" className=\"btn btn-success\">\r\n                Registruotis\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}